package OOT;

import java.util.Scanner;

public class Main {
	
	public static void main(String[] args) throws InterruptedException {

		
			makeMenu();
		

	}

	public static void makeMenu() throws InterruptedException {
	
		int eingabe;
		
		System.out.println("------------------- Menue -------------------");
		System.out.println("1: Spielerauswahl");
		System.out.println("2: Spiel beenden");
			
		Scanner scanner = new Scanner(System.in);
		eingabe = scanner.nextInt();
		
		boolean beende = false;
		while (!beende){
			switch (eingabe) {
			case 1:
				System.out.println("1. Spieler vs Spieler");
				System.out.println("2. Spieler vs Computer");
				System.out.println("3. Computer vs Computer");
				eingabe = scanner.nextInt();
				switch (eingabe) {
				case 1:  // 1. Spieler vs Spieler
					starteSpiel();
					break;
				case 2: // 2. Spieler vs Computer
					System.out.println("1. Spieler beginnt");
					System.out.println("2. Computer beginnt");
					eingabe = scanner.nextInt();
					switch(eingabe){
					case 1: // Spieler beginnt
						System.out.println("1. Schwierigkeit : Einfach");
						System.out.println("2. Schwierigkeit : Normal");
						System.out.println("3. Schwierigkeit : Schwer");
						eingabe = scanner.nextInt();
						switch(eingabe){
						case 1: // Einfach
							System.out.println("EASYYYYYYYYYYYYYYYYY");
							starteSpiel();
							break;
						case 2: // Normal
							System.out.println("Normallllll");
							starteSpiel();
							break;
						case 3:  // Schwer
							System.out.println("UFPASSSE");
							starteSpiel();
							break;
						default:
							break;
						}
					break;
					case 2: // Computer beginnt
						System.out.println("1. Schwierigkeit : Einfach");
						System.out.println("2. Schwierigkeit : Normal");
						System.out.println("3. Schwierigkeit : Schwer");
						eingabe = scanner.nextInt();
						switch(eingabe){
						case 1: // Einfach
							System.out.println("EASYYYYYYYYYYYYYYYYY");
							starteSpiel();
							break;
						case 2: // Normal
							System.out.println("Normallllll");
							starteSpiel();
							break;
						case 3:  // Schwer
							System.out.println("UFPASSSE");
							starteSpiel();
							break;
						default:
							break;
						}
					}
					break;
				case 3: // 3. Computer vs Computer
					System.out.println("1. Computer 1 beginnt");
					System.out.println("2. Computer 2 beginnt");
					eingabe = scanner.nextInt();
					switch(eingabe) {
					case 1:  // Computer1 beginnt
						System.out.println("1. KI Stärke : Einfach ");
						System.out.println("2. KI Stärke : Normal");
						System.out.println("3. KI Stärke : Schwer");
						eingabe = scanner.nextInt();
						switch(eingabe){
						case 1: // KI Easy
							System.out.println("EASYY");
							starteSpiel();
							break;
						case 2: // KI Normal
							System.out.println("Normal");
							starteSpiel();
							break;
						case 3: // KI Schwer
							System.out.println("Hardddd");
							starteSpiel();
							break;
						default:
							break;
						}
					break;
					case 2: // Computer2 beginnt
						System.out.println("1. KI Stärke : Einfach ");
						System.out.println("2. KI Stärke : Normal");
						System.out.println("3. KI Stärke : Schwer");
						eingabe = scanner.nextInt();
						switch(eingabe){
						case 1: // KI Easy
							System.out.println("EASYY");
							starteSpiel();
							break;
						case 2: // KI Normal
							System.out.println("Normal");
							starteSpiel();
							break;
						case 3: // KI Schwer
							System.out.println("Hardddd");
							starteSpiel();
							break;
						default:
							break;
						}
						break;
					default:
						break;
					}
				
				}
			case 2: // Spiel beenden
				beende = true;
				break;
			default:
				break;
			}
		
		if (eingabe == 2)
			
		
		System.out.println("Spiel beendet");
		System.out.println("_____________________________");
		}
		
	}
	
	
	
	public static void starteSpiel() throws InterruptedException{
		
		int beginner;
		
		// Neues Spiel erstellen
        Game g = new Game();
        // Zwei Spieler erstellen
        Spieler s1 = new Spieler("Spieler 1");
        Spieler s2 = new Spieler("Spieler 2");
        // Spieler zum Spiel hinzufügen
        g.addSpieler(s1);
        g.addSpieler(s2);
        
        // Spieler 1
        // Schiffe für Ebene 1 setzen
        schiffSetzen(5, 1, s1);
        schiffSetzen(4, 1, s1);
        schiffSetzen(3, 1, s1);
        schiffSetzen(2, 1, s1);
        // Schiffe für Ebene 2 setzen
        schiffSetzen(3, 2, s1);
        schiffSetzen(3, 2, s1);
        schiffSetzen(3, 2, s1);
        schiffSetzen(3, 2, s1);
        // Schiffe für Ebene 3 setzen
        schiffSetzen(3, 3, s1);
        schiffSetzen(3, 3, s1);
        schiffSetzen(3, 3, s1);
        schiffSetzen(3, 3, s1);
        
        // Spieler 2
        // Schiffe für Ebene 1 setzen
        schiffSetzen(5, 1, s2);
        schiffSetzen(4, 1, s2);
        schiffSetzen(3, 1, s2);
        schiffSetzen(2, 1, s2);
        // Schiffe für Ebene 2 setzen
        schiffSetzen(3, 2, s2);
        schiffSetzen(3, 2, s2);
        schiffSetzen(3, 2, s2);
        schiffSetzen(3, 2, s2);
        // Schiffe für Ebene 3 setzen
        schiffSetzen(3, 3, s2);
        schiffSetzen(3, 3, s2);
        schiffSetzen(3, 3, s2);
        schiffSetzen(3, 3, s2);
 
        // Abfrage wer beginnt 
        System.out.println("1 = Spieler 1 beginnt, 2 = Spieler 2 beginnt");
        Scanner test = new Scanner(System.in);
        beginner = test.nextInt();
        while(g.isRunning()){
        if(beginner == 1) {
        	
        	boolean daneben = false;
        		while (daneben == false){
        			s1.printBoard();
        			System.out.println("Gebe Koordinaten an");
        			Scanner feld = new Scanner(System.in);
        			String spieler1 = feld.nextLine();
        			// Prüft ob Eingabe Valid ist
	        		g.isValidFormat(spieler1);
	        		// Prüft ob ein schiff getroffen wurde
	        		if(s2.takeHit(spieler1)){
	        			System.out.println("treffer");  
	        			  daneben = false;
	        			  g.isRunning();
	        			  if(g.isRunning() == false){
	        				  System.out.println("Spiel beendet. Alle Schiffe von Spieler 2 wurden versenkt");
	        			  	  System.out.println("Sieger ist : " + g.whoWon());
	        				  System.exit(0);
	        			   }
	        		}else{        	
	        			System.out.println("daneben");
	        			System.out.println("Spieler 2 ist am Zug");
	        			ready();
	        			Scanner ready = new Scanner(System.in);
	        			System.out.println("Bereit? ");
	        			System.out.println("Beliebige Taste drücken und mit Enter bestätigen");  
	        			String bereit = ready.nextLine(); 
	        			daneben = true;	        				
	        			
	        			
	        		}
				}
	        	while (daneben == true) {
	        		
	        		System.out.println("Gebe Koordinaten an");
	        		s2.printBoard();
	        		Scanner feld = new Scanner(System.in);
	        		String spieler2 = feld.nextLine();
	        		g.isValidFormat(spieler2);
	        		if(s1.takeHit(spieler2)){
	       				System.out.println("Treffer");
	       				daneben = true;
	       				g.isRunning();
	        			if(g.isRunning() == false){
	        			  System.out.println("Spiel beendet. Alle Schiffe von Spieler 2 wurden versenkt");
	        			  System.out.println("Sieger ist : " + g.whoWon());
	        			  System.exit(0);
	        		    }
	       			}else {
	        			System.out.println("Daneben");
	        			System.out.println("Spieler 1 am Zug:");
	        			
	        			ready();
	        			Scanner ready = new Scanner(System.in);
	        			System.out.println("Bereit? ");
	        			System.out.println("Beliebige Taste drücken und mit Enter bestätigen");  
	        			String bereit = ready.nextLine(); 
	        			daneben = false;	        				
	        			
	       			} 
	        	}
    	
        }else if (beginner == 2){
        	
        		boolean daneben = false;
        		while (daneben == false){
        			s2.printBoard();
        			System.out.println("Gebe Koordinaten an");
        			Scanner feld = new Scanner(System.in);
        			String spieler2 = feld.nextLine();
        			// Prüft ob Eingabe Valid ist
	        		g.isValidFormat(spieler2);
	        		// Prüft ob ein schiff getroffen wurde
	        		if(s1.takeHit(spieler2)){
	        			System.out.println("treffer");  
	        			daneben = false;
	        			g.isRunning();
	        			if(g.isRunning() == false){
	        			  System.out.println("Spiel beendet. Alle Schiffe von Spieler 2 wurden versenkt");
	        			  System.out.println("Sieger ist : " + g.whoWon());
	        			  System.exit(0);
	        		    }
	        		}else{        	
	        			System.out.println("daneben");
	        			System.out.println("Spieler 2 ist am Zug");
	        			ready();
	        			Scanner ready = new Scanner(System.in);
	        			System.out.println("Bereit? ");
	        			System.out.println("Beliebige Taste drücken und mit Enter bestätigen");  
	        			String bereit = ready.nextLine(); 
	        			daneben = false;	        				
	        			
	        		}
				}
	        	while (daneben == true) {
	        		
	        		s1.printBoard();
	        		Scanner feld = new Scanner(System.in);
	        		String spieler1 = feld.nextLine();
	        		g.isValidFormat(spieler1);
	        		if(s2.takeHit(spieler1)){
	       				System.out.println("Treffer");
	       				daneben = true;
	       				g.isRunning();
	        			if(g.isRunning() == false){
	        			  System.out.println("Spiel beendet. Alle Schiffe von Spieler 2 wurden versenkt");
	        			  System.out.println("Sieger ist : " + g.whoWon());
	        			  System.exit(0);
	        		    }
	       			}else if(!s2.takeHit(spieler1)) {
	        			System.out.println("Daneben");
	        			System.out.println("Spieler 1 am Zug:");
	        			ready();
	        			Scanner ready = new Scanner(System.in);
	        			System.out.println("Bereit? ");
	        			System.out.println("Beliebige Taste drücken und mit Enter bestätigen");  
	        			String bereit = ready.nextLine(); 
	        			daneben = false;	        				
	        			
	       			} 
	        	}
        	}
        }
      
	}

	/** Spielerwechsel mit Abfrage ob Bereit
	 * 
	 * @throws InterruptedException
	 */
	 public static void ready() throws InterruptedException{

		Thread.sleep(300);
	   	for(int i = 0;i<50;i++){
	   		System.out.print("\n");   
	   	}	   
	 }
	 public static void schiffSetzen(int size, int ebene, Spieler spieler) {
		 
				 System.out.println(spieler.getName() + " bitte setze ein " + size +"er Schiff auf Ebene " + ebene);
				 System.out.println("Startkoordinaten:");
				 Scanner eingabe = new Scanner(System.in);
				 String start = eingabe.nextLine();
		 		 System.out.println("Endkoordinaten:");
				 String ende = eingabe.nextLine();
				 
				 if(spieler.schiffSetzen(start, ende, ebene, size) == true) {
					 
				 }else { 
					 System.out.println("Eingabe war Fehlerhast. Bitte nochmal versuchen");
					 spieler.printBoard();
					 schiffSetzen(size, ebene, spieler);
				 }
		
	 }
	}

